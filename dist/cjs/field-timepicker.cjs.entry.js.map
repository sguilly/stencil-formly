{"file":"field-timepicker.entry.cjs.js","mappings":";;;;;;;AAAA,MAAM,kBAAkB,GAAG,iDAAiD;;MCY/D,wBAAwB;;;;;oBAEhB,KAAK;2BACO,EAAE;;;EAcjC,eAAe,CAAC,QAAiB,EAAE,SAAkB;IACnD,OAAO,CAAC,GAAG,CAAC,uBAAuB,EAAE,QAAQ,CAAC,CAAC;IAE/C,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;GACjC;EAED,iBAAiB;IACf,IAAI,QAAQ,GAAG,EAAE,CAAC;IAElB,QAAQ,CAAC,IAAI,CAACA,kBAAO,CAAC,+DAA+D,CAAC,CAAC,CAAC;IAExF,QAAQ,CAAC,IAAI,CAACC,qBAAU,CAAC,wCAAwC,CAAC,CAAC,CAAC;IAEpE,QAAQ,CAAC,IAAI,CAACA,qBAAU,CAAC,wDAAwD,CAAC,CAAC,CAAC;IAEpF,OAAO,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;GAC9B;EAED,gBAAgB;IACd,IAAI,IAAI,GAAG,IAAI,CAAC;IAEhB,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,iBAAiB,EAAE;MAChD,MAAM,EAAE,IAAI;MACZ,UAAU,EAAE,IAAI;MAChB,UAAU,EAAE,IAAI;MAChB,UAAU,EAAE,IAAI;MAChB,UAAU,EAAE,KAAK;MACjB,SAAS,EAAE,IAAI;MACf,WAAW,EAAE,OAAO;MACpB,QAAQ,EAAE,UAAU,aAAa,EAAE,OAAO,EAAE,SAAS;QACnD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QAEvB,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;QAEpC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;OAC5D;KACF,CAAC,CAAC;IAEH,IAAI,IAAI,CAAC,KAAK,EAAE;MACd,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;MACrC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACnC;GACF;EAED,WAAW;IACT,OAAO,CAACC,mBAAO,KAAK,EAAC,OAAO,EAAC,IAAI,EAAC,MAAM,EAAC,WAAW,EAAC,eAAe,EAAC,GAAG,EAAE,EAAE,KAAK,IAAI,CAAC,iBAAiB,GAAG,EAAiB,CAAC,GAAU,CAAC,CAAC;GACzI;EAED,MAAM,mBAAmB;;IACvB,IAAI,CAAC,eAAe,GAAG,CAAA,MAAA,IAAI,CAAC,eAAe,0CAAE,QAAQ,KAAI,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;GAC9E;EAED,MAAM;IACJ,QACEA,6BAAiB,eAAe,EAAE,IAAI,CAAC,eAAe,EAAE,eAAe,EAAE,IAAI,CAAC,eAAe,IAC1F,IAAI,CAAC,WAAW,EAAE,CACH,EAClB;GACH;;;;;;;;;;","names":["loadCss","loadModule","h"],"sources":["./src/components/dynamic-form/fields/field-timepicker.css?tag=field-timepicker","./src/components/dynamic-form/fields/field-timepicker.tsx"],"sourcesContent":["custom-timepicker input {\n  width: 100px !important;\n}\n","import { Component, Event, EventEmitter, Element, State, h, Prop, Watch } from '@stencil/core';\n\nimport { loadScript, loadCss, loadModule, loadNoModule } from '../../../utils/loadScript';\n\ndeclare var flatpickr: any;\ndeclare var French: any;\n\n@Component({\n  tag: 'field-timepicker',\n  styleUrl: 'field-timepicker.css',\n  shadow: false,\n})\nexport class FieldTimepickerComponent {\n  @Prop() value: any;\n  @Prop() disabled = false;\n  @Prop() templateOptions: any = {};\n\n  @Event() customChange: EventEmitter<any>;\n\n  @Element() el: HTMLElement;\n\n  datePickerElement;\n\n  calendar;\n  displayRequired;\n\n  @State() dateStr;\n\n  @Watch('value')\n  calendarHandler(newValue: boolean, _oldValue: boolean) {\n    console.log('New value for value: ', newValue);\n\n    this.calendar.setDate(newValue);\n  }\n\n  componentWillLoad() {\n    let promises = [];\n\n    promises.push(loadCss('https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css'));\n\n    promises.push(loadModule('https://cdn.jsdelivr.net/npm/flatpickr'));\n\n    promises.push(loadModule('https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js'));\n\n    return Promise.all(promises);\n  }\n\n  componentDidLoad() {\n    let that = this;\n\n    this.calendar = flatpickr(this.datePickerElement, {\n      locale: 'fr',\n      allowInput: true,\n      enableTime: true,\n      noCalendar: true,\n      dateFormat: 'H:i',\n      time_24hr: true,\n      defaultDate: '12:00',\n      onChange: function (selectedDates, dateStr, _instance) {\n        that.dateStr = dateStr;\n\n        console.log(selectedDates, dateStr);\n\n        that.customChange.emit({ value: new Date(selectedDates) });\n      },\n    });\n\n    if (this.value) {\n      console.log('set value', this.value);\n      this.calendar.setDate(this.value);\n    }\n  }\n\n  renderInput() {\n    return [<input class=\"input\" type=\"text\" placeholder=\"Select Time..\" ref={el => (this.datePickerElement = el as HTMLElement)}></input>];\n  }\n\n  async componentWillRender() {\n    this.displayRequired = this.templateOptions?.required == true && !this.value;\n  }\n\n  render() {\n    return (\n      <field-container templateOptions={this.templateOptions} displayRequired={this.displayRequired}>\n        {this.renderInput()}\n      </field-container>\n    );\n  }\n}\n"],"version":3}