{"version":3,"names":["fieldDatepickerCss","FieldDatepickerComponent","calendarHandler","newValue","_oldValue","console","log","this","calendar","setDate","componentWillLoad","promises","push","loadCss","loadModule","Promise","all","componentDidLoad","that","flatpickr","datePickerElement","locale","allowInput","defaultDate","dateFormat","onChange","selectedDates","dateStr","_instance","customChange","emit","value","Date","renderInput","h","class","_c","_b","_a","classNames","group","control","className","displayRequired","type","placeholder","ref","el","async","getClassNames","templateOptions","required","render"],"sources":["./src/components/dynamic-form/fields/field-datepicker.css?tag=field-datepicker","./src/components/dynamic-form/fields/field-datepicker.tsx"],"sourcesContent":["input[type=\"checkbox\"] {\n  transform: scale(1);\n}\n\ncustom-datepicker input {\n  width: 100px !important;\n}\n","import { Component, Event, EventEmitter, Element, State, h, Prop, Watch } from '@stencil/core';\nimport { getClassNames } from '../../../styles/style';\nimport { loadScript, loadCss, loadModule, loadNoModule } from '../../../utils/loadScript';\n\ndeclare var flatpickr: any;\ndeclare var French: any;\n\n@Component({\n  tag: 'field-datepicker',\n  styleUrl: 'field-datepicker.css',\n  shadow: false,\n})\nexport class FieldDatepickerComponent {\n  @Prop() value: any;\n  @Prop() disabled = false;\n  @Prop() templateOptions: any = {};\n\n  @Event() customChange: EventEmitter<any>;\n\n  @Element() el: HTMLElement;\n\n  datePickerElement;\n\n  calendar;\n\n  displayRequired;\n  classNames\n\n  @State() dateStr;\n\n  @Watch('value')\n  calendarHandler(newValue: boolean, _oldValue: boolean) {\n    console.log('New value for value: ', newValue);\n\n    this.calendar.setDate(newValue);\n  }\n\n  componentWillLoad() {\n    let promises = [];\n\n    promises.push(loadCss('https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css'));\n\n    promises.push(loadModule('https://cdn.jsdelivr.net/npm/flatpickr'));\n\n    promises.push(loadModule('https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/fr.js'));\n\n    return Promise.all(promises);\n  }\n\n  componentDidLoad() {\n    let that = this;\n\n    this.calendar = flatpickr(this.datePickerElement, {\n      locale: 'fr',\n      allowInput: true,\n      defaultDate: 'today',\n      dateFormat: 'd-m-Y',\n      onChange: function (selectedDates, dateStr, _instance) {\n        that.dateStr = dateStr;\n\n        that.customChange.emit({ value: new Date(selectedDates) });\n      },\n    });\n\n    if (this.value) {\n      console.log('set value', this.value);\n      this.calendar.setDate(this.value);\n    }\n  }\n\n  renderInput() {\n    return [<input class={(this.classNames?.group?.control?.className || '') + (this.displayRequired == true ? ' df-is-required' : '')} type=\"text\" placeholder=\"Select Date..\" ref={el => (this.datePickerElement = el as HTMLElement)}></input>];\n  }\n\n  async componentWillRender() {\n    this.classNames = getClassNames()\n    this.displayRequired = this.templateOptions?.required == true && !this.value;\n  }\n\n  render() {\n    return (\n      <field-container templateOptions={this.templateOptions} displayRequired={this.displayRequired}>\n        {this.renderInput()}\n      </field-container>\n    );\n  }\n}\n"],"mappings":"2JAAA,MAAMA,EAAqB,4F,MCYdC,EAAwB,M,uGAEhB,M,qBACY,G,uBAgB/BC,gBAAgBC,EAAmBC,GACjCC,QAAQC,IAAI,wBAAyBH,GAErCI,KAAKC,SAASC,QAAQN,E,CAGxBO,oBACE,IAAIC,EAAW,GAEfA,EAASC,KAAKC,EAAQ,kEAEtBF,EAASC,KAAKE,EAAW,2CAEzBH,EAASC,KAAKE,EAAW,2DAEzB,OAAOC,QAAQC,IAAIL,E,CAGrBM,mBACE,IAAIC,EAAOX,KAEXA,KAAKC,SAAWW,UAAUZ,KAAKa,kBAAmB,CAChDC,OAAQ,KACRC,WAAY,KACZC,YAAa,QACbC,WAAY,QACZC,SAAU,SAAUC,EAAeC,EAASC,GAC1CV,EAAKS,QAAUA,EAEfT,EAAKW,aAAaC,KAAK,CAAEC,MAAO,IAAIC,KAAKN,I,IAI7C,GAAInB,KAAKwB,MAAO,CACd1B,QAAQC,IAAI,YAAaC,KAAKwB,OAC9BxB,KAAKC,SAASC,QAAQF,KAAKwB,M,EAI/BE,c,UACE,MAAO,CAACC,EAAA,SAAOC,SAAQC,GAAAC,GAAAC,EAAA/B,KAAKgC,cAAU,MAAAD,SAAA,SAAAA,EAAEE,SAAK,MAAAH,SAAA,SAAAA,EAAEI,WAAO,MAAAL,SAAA,SAAAA,EAAEM,YAAa,KAAOnC,KAAKoC,iBAAmB,KAAO,kBAAoB,IAAKC,KAAK,OAAOC,YAAY,gBAAgBC,IAAKC,GAAOxC,KAAKa,kBAAoB2B,I,CAGnNC,4B,MACEzC,KAAKgC,WAAaU,IAClB1C,KAAKoC,kBAAkBL,EAAA/B,KAAK2C,mBAAe,MAAAZ,SAAA,SAAAA,EAAEa,WAAY,OAAS5C,KAAKwB,K,CAGzEqB,SACE,OACElB,EAAA,mBAAiBgB,gBAAiB3C,KAAK2C,gBAAiBP,gBAAiBpC,KAAKoC,iBAC3EpC,KAAK0B,c"}