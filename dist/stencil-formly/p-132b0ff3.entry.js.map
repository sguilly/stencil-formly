{"version":3,"names":["filterObject","obj","fn","Object","keys","reduce","accum","property","value","isDefined","getValues","concat","split","choicesJsCss","ChoicesJSStencil","async","Choices","promises","version","push","loadCss","loadScript","Promise","all","item","runEvent","this","choice","highlightItem","unhighlightItem","highlightAll","unhighlightAll","removeActiveItemsByValue","excludedId","removeActiveItems","removeHighlightedItems","focusInput","showDropdown","blurInput","hideDropdown","valueOnly","getValue","args","setValue","setChoiceByValue","choices","label","replaceChoices","setChoices","clearChoices","clearStore","clearInput","enable","ajax","componentDidLoad","init","componentDidUpdate","disconnectedCallback","destroy","handleSelect","event","console","log","target","render","attributes","name","type","element","h","assign","onInput","createSelectOptions","multiple","props","silent","items","renderChoiceLimit","maxItemCount","addItems","removeItems","removeItemButton","editItems","duplicateItemsAllowed","delimiter","paste","searchEnabled","searchChoices","searchFields","searchFloor","searchResultLimit","position","resetScrollPosition","shouldSort","shouldSortItems","sorter","placeholder","placeholderValue","searchPlaceholderValue","prependValue","appendValue","renderSelectedChoices","loadingText","noResultsText","noChoicesText","itemSelectText","addItemText","maxItemText","uniqueItemText","classNames","fuseOptions","callbackOnInit","callbackOnCreateTemplates","valueComparer","addItemFilter","customAddItemText","settings","root","querySelector","valueByDefault","disable","passedElement","addEventListener","callbackChoice","emit","detail","values","map"],"sources":["./src/components/choices-js/utils.ts","./src/components/choices-js/choices-js.css?tag=choices-js","./src/components/choices-js/choices-js.tsx"],"sourcesContent":["export type FilterObjectFn = (value: any, key: string | number, obj: object) => boolean;\n\n/**\n * Filter out entries from an object.\n *\n * @param obj - object to filter.\n * @param fn - filter function.\n * @returns a new object without the entries satisfying the filter function.\n */\nexport function filterObject(obj: object, fn: FilterObjectFn): object {\n  return Object.keys(obj).reduce((accum, property) => {\n    const value = obj[property];\n\n    if (fn(value, property, obj)) {\n      accum[property] = value;\n    }\n\n    return accum;\n  }, {});\n}\n\n/**\n * Check if given parameter is not undefined.\n *\n * @param value - value to check.\n * @returns whether the value is defined.\n */\nexport function isDefined(value: any): boolean {\n  return typeof value !== 'undefined';\n}\n\n/**\n * Returns the list of values.\n *\n * @param value - Value or list of values.\n * @returns List of values.\n */\nexport function getValues(value: string | Array<string>): Array<string> {\n  return typeof value !== 'undefined'\n    ? [].concat(typeof value === 'string' ? value.split(',') : value)\n    : [];\n}\n","choices-js {\n  min-width: 200px !important;\n}\n","import { h, Component, Element, Method, Prop, Event, EventEmitter } from '@stencil/core';\n\nimport { loadScript, loadCss } from '../../utils/loadScript';\n\nimport { HTMLStencilElement } from '@stencil/core/internal';\nimport {\n  AjaxFn,\n  ClassNames,\n  FuseOptions,\n  IChoicesProps,\n  IChoicesMethods,\n  ItemFilterFn,\n  NoResultsTextFn,\n  NoChoicesTextFn,\n  AddItemTextFn,\n  MaxItemTextFn,\n  SortFn,\n  OnInit,\n  OnCreateTemplates,\n  UniqueItemText,\n  ValueCompareFunction,\n  CustomAddItemText,\n} from './interfaces';\nimport { getValues, filterObject, isDefined } from './utils';\n\ndeclare var Choices;\n\n@Component({\n  tag: 'choices-js',\n  styleUrl: 'choices-js.css',\n  shadow: false,\n})\n// implements IChoicesProps, IChoicesMethods\nexport class ChoicesJSStencil {\n  @Prop() public valueByDefault;\n\n  @Event() callbackChoice: EventEmitter<any>;\n\n  @Prop() public type?: 'single' | 'multiple' | 'text';\n  @Prop() public value: string;\n  @Prop() public name: string;\n  @Prop() public disable: boolean;\n\n  @Prop() public silent: boolean;\n  @Prop() public items: Array<any>;\n  @Prop() public choices: Array<any>;\n  @Prop() public renderChoiceLimit: number;\n  @Prop() public maxItemCount: number;\n  @Prop() public addItems: boolean;\n  @Prop() public removeItems: boolean;\n  @Prop() public removeItemButton: boolean;\n  @Prop() public editItems: boolean;\n  @Prop() public duplicateItemsAllowed: boolean;\n  @Prop() public delimiter: string;\n  @Prop() public paste: boolean;\n  @Prop() public searchEnabled: boolean;\n  @Prop() public searchChoices: boolean;\n  @Prop() public searchFields: Array<string> | string;\n  @Prop() public searchFloor: number;\n  @Prop() public searchResultLimit: number;\n  @Prop() public position: 'auto' | 'top' | 'bottom';\n  @Prop() public resetScrollPosition: boolean;\n  @Prop() public shouldSort: boolean;\n  @Prop() public shouldSortItems: boolean;\n  @Prop() public sorter: SortFn;\n  @Prop() public placeholder: boolean | string;\n  @Prop() public placeholderValue: string;\n  @Prop() public searchPlaceholderValue: string;\n  @Prop() public prependValue: string;\n  @Prop() public appendValue: string;\n  @Prop() public renderSelectedChoices: 'always' | 'auto';\n  @Prop() public loadingText: string;\n  @Prop() public noResultsText: string | NoResultsTextFn;\n  @Prop() public noChoicesText: string | NoChoicesTextFn;\n  @Prop() public itemSelectText: string;\n  @Prop() public addItemText: string | AddItemTextFn;\n  @Prop() public maxItemText: string | MaxItemTextFn;\n  @Prop() public uniqueItemText: UniqueItemText;\n  @Prop() public classNames: ClassNames;\n  @Prop() public fuseOptions: FuseOptions;\n  @Prop() public addItemFilter: string | RegExp | ItemFilterFn;\n  @Prop() public customAddItemText: CustomAddItemText;\n  @Prop() public callbackOnInit: OnInit;\n  @Prop() public callbackOnCreateTemplates: OnCreateTemplates;\n  @Prop() public valueComparer: ValueCompareFunction;\n\n  @Element() private readonly root: HTMLElement;\n\n  private choice;\n  private element;\n\n  async componentWillRender() {\n    if (typeof Choices == 'undefined') {\n      let promises = [];\n      const version = '10.2.0';\n\n      promises.push(loadCss('https://cdn.jsdelivr.net/npm/choices.js@' + version + '/public/assets/styles/choices.min.css'));\n      promises.push(loadScript('https://cdn.jsdelivr.net/npm/choices.js@' + version + '/public/assets/scripts/choices.min.js'));\n\n      await Promise.all(promises);\n    }\n  }\n\n  @Method()\n  public async highlightItem(item: HTMLElement, runEvent?: boolean) {\n    this.choice.highlightItem(item, runEvent);\n\n    return this;\n  }\n\n  @Method()\n  public async unhighlightItem(item: HTMLElement) {\n    this.choice.unhighlightItem(item);\n\n    return this;\n  }\n\n  @Method()\n  public async highlightAll() {\n    this.choice.highlightAll();\n\n    return this;\n  }\n\n  @Method()\n  public async unhighlightAll() {\n    this.choice.unhighlightAll();\n\n    return this;\n  }\n\n  @Method()\n  public async removeActiveItemsByValue(value: string) {\n    this.choice.removeActiveItemsByValue(value);\n\n    return this;\n  }\n\n  @Method()\n  public async removeActiveItems(excludedId?: number) {\n    this.choice.removeActiveItems(excludedId);\n\n    return this;\n  }\n\n  @Method()\n  public async removeHighlightedItems(runEvent?: boolean) {\n    this.choice.removeHighlightedItems(runEvent);\n\n    return this;\n  }\n\n  @Method()\n  public async showDropdown(focusInput?: boolean) {\n    this.choice.showDropdown(focusInput);\n\n    return this;\n  }\n\n  @Method()\n  public async hideDropdown(blurInput?: boolean) {\n    this.choice.hideDropdown(blurInput);\n\n    return this;\n  }\n\n  @Method()\n  public async getValue(valueOnly?: boolean): Promise<string | Array<string>> {\n    return this.choice.getValue(valueOnly);\n  }\n\n  @Method()\n  public async setValue(args: Array<any>) {\n    this.choice.setValue(args);\n\n    return this;\n  }\n\n  @Method()\n  public async setChoiceByValue(value: string | Array<string>) {\n    this.choice.setChoiceByValue(value);\n\n    return this;\n  }\n\n  @Method()\n  public async setChoices(choices: Array<any>, value: string, label: string, replaceChoices?: boolean) {\n    this.choice.setChoices(choices, value, label, replaceChoices);\n\n    return this;\n  }\n\n  @Method()\n  public async clearChoices() {\n    this.choice.clearChoices();\n\n    return this;\n  }\n\n  @Method()\n  public async clearStore() {\n    this.choice.clearStore();\n\n    return this;\n  }\n\n  @Method()\n  public async clearInput() {\n    this.choice.clearInput();\n\n    return this;\n  }\n\n  @Method()\n  public async enable() {\n    this.choice.enable();\n\n    return this;\n  }\n\n  @Method()\n  public async ajax(fn: AjaxFn) {\n    this.choice.ajax(fn);\n\n    return this;\n  }\n\n  protected componentDidLoad() {\n    this.init();\n  }\n\n  protected componentDidUpdate() {\n    this.init();\n  }\n\n  protected disconnectedCallback() {\n    this.destroy();\n  }\n\n  handleSelect(event) {\n    console.log('choices ev', event.target.value);\n  }\n\n  protected render(): any {\n    const attributes = {\n      'data-selector': 'root',\n      'name': this.name || null,\n    };\n\n    // destroy choices element to restore previous dom structure\n    // so vdom can replace the element correctly\n    this.destroy();\n\n    switch (this.type) {\n      case 'single':\n        this.element = (\n          <select onInput={event => this.handleSelect(event)} {...attributes}>\n            {this.value ? this.createSelectOptions(this.value) : null}\n          </select>\n        );\n        break;\n      case 'multiple':\n        this.element = (\n          <select onInput={event => this.handleSelect(event)} {...attributes} multiple>\n            {this.value ? this.createSelectOptions(this.value) : null}\n          </select>\n        );\n        break;\n      case 'text':\n      default:\n        this.element = <input type=\"text\" onInput={event => this.handleSelect(event)} value={this.value} {...attributes} />;\n        break;\n    }\n\n    return this.element;\n  }\n\n  private init() {\n    const props = {\n      silent: this.silent,\n      items: this.items,\n      choices: this.choices,\n      renderChoiceLimit: this.renderChoiceLimit,\n      maxItemCount: this.maxItemCount,\n      addItems: this.addItems,\n      removeItems: this.removeItems,\n      removeItemButton: this.removeItemButton,\n      editItems: this.editItems,\n      duplicateItemsAllowed: this.duplicateItemsAllowed,\n      delimiter: this.delimiter,\n      paste: this.paste,\n      searchEnabled: this.searchEnabled,\n      searchChoices: this.searchChoices,\n      searchFields: this.searchFields,\n      searchFloor: this.searchFloor,\n      searchResultLimit: this.searchResultLimit,\n      position: this.position,\n      resetScrollPosition: this.resetScrollPosition,\n      shouldSort: this.shouldSort,\n      shouldSortItems: this.shouldSortItems,\n      sorter: this.sorter,\n      placeholder: true,\n      placeholderValue: this.placeholderValue || (typeof this.placeholder === 'string' && this.placeholder) || ' ',\n      searchPlaceholderValue: this.searchPlaceholderValue,\n      prependValue: this.prependValue,\n      appendValue: this.appendValue,\n      renderSelectedChoices: this.renderSelectedChoices,\n      loadingText: this.loadingText,\n      noResultsText: this.noResultsText,\n      noChoicesText: this.noChoicesText,\n      itemSelectText: this.itemSelectText,\n      addItemText: this.addItemText,\n      maxItemText: this.maxItemText,\n      uniqueItemText: this.uniqueItemText,\n      classNames: this.classNames,\n      fuseOptions: this.fuseOptions,\n      callbackOnInit: this.callbackOnInit,\n      callbackOnCreateTemplates: this.callbackOnCreateTemplates,\n      valueComparer: this.valueComparer,\n      addItemFilter: this.addItemFilter,\n      customAddItemText: this.customAddItemText,\n    };\n    const settings = filterObject(props, isDefined);\n\n    console.log('new choice', settings);\n    this.choice = new Choices(this.root.querySelector('[data-selector=\"root\"]'), settings);\n\n    if (this.valueByDefault) {\n      console.log('set default value', this.valueByDefault);\n      this.choice.setChoiceByValue(this.valueByDefault);\n    } else {\n      console.log('no default value');\n      //this.choice.clearChoices();\n    }\n\n    if (this.disable == true) {\n      this.choice.disable();\n    }\n\n    this.choice.passedElement.element.addEventListener(\n      'choice',\n      event => {\n        // do something creative here...\n        this.callbackChoice.emit(event.detail.choice);\n      },\n      false,\n    );\n  }\n\n  private destroy() {\n    if (this.element) {\n      this.element = null;\n    }\n\n    if (this.choice) {\n      this.choice.destroy();\n      this.choice = null;\n    }\n  }\n\n  private createSelectOptions(values: string | Array<string>): Array<HTMLStencilElement> {\n    return getValues(values).map(value => <option value={value}>{value}</option>);\n  }\n}\n"],"mappings":"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"}