{"version":3,"names":["dynamicFormCss","DynamicForm","async","promises","this","options","style","state","push","loadCss","length","Promise","all","renderField","element","disable","model","templateOptions","requiredText","_a","Tag","type","h","value","key","onCustomChange","ev","detail","_b","Object","assign","event","emit","renderFields","elements","map","isHide","hide","class","fields","fieldClass","size","className","separator","render","console","log","Example1","constructor","hostRef","firstName","lastName","form","html","label","required","id","multiple","displayDocs","save"],"sources":["./src/components/dynamic-form/dynamic-form.css?tag=dynamic-form","./src/components/dynamic-form/dynamic-form.tsx","./src/examples/example-1.tsx"],"sourcesContent":[".df-fields-container {\n  display: flex !important;\n  flex-direction: row !important;\n  flex-wrap: wrap !important;\n  align-content: stretch !important;\n}\n\n.df-is-required {\n  border-color: #f14668 !important;\n  color: #f14668 !important;\n}\n\n.is-flex-grow-0 {\n  flex-grow: 0 !important;\n}\n\n.is-flex-grow-1 {\n  flex-grow: 1 !important;\n}\n\n.is-flex-grow-2 {\n  flex-grow: 2 !important;\n}\n\n.is-flex-grow-3 {\n  flex-grow: 3 !important;\n}\n\n.is-flex-grow-4 {\n  flex-grow: 4 !important;\n}\n\n.is-flex-grow-5 {\n  flex-grow: 5 !important;\n}\n","import { Component, h, Prop, Event, EventEmitter } from '@stencil/core';\nimport { loadCss } from '../../utils/loadScript';\n\nimport { state, onChange } from '../../stores/styleStore';\n\n@Component({\n  tag: 'dynamic-form',\n  styleUrl: 'dynamic-form.css',\n})\nexport class DynamicForm {\n  @Prop() model = {};\n  @Prop() fields;\n  @Prop() options: any;\n\n  @Event() event: EventEmitter<any>;\n\n  async componentWillLoad() {\n    let promises = [];\n    if (this.options.style) {\n      state.style = this.options.style;\n    }\n\n    if (state.style == 'bulma') {\n      promises.push(loadCss('https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css'));\n    } else if (state.style == 'bootstrap') {\n      promises.push(loadCss('https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css'));\n    }\n\n    if (promises.length) {\n      await Promise.all(promises);\n    }\n  }\n\n  renderField(element) {\n    let isDisabled = false;\n    if (element.disable) {\n      isDisabled = element.disable(this.model);\n    }\n\n    element.templateOptions.requiredText = this.options?.requiredText || 'This field is required';\n\n    const Tag = 'field-' + element.type;\n\n    return (\n      <Tag\n        value={this.model[element.key]}\n        templateOptions={element.templateOptions}\n        onCustomChange={ev => {\n          if (ev.detail?.value) {\n            this.model[element.key] = ev.detail?.value;\n          } else {\n            delete this.model[element.key];\n          }\n\n          this.model = { ...this.model };\n          this.event.emit({ type: 'change', model: this.model });\n        }}\n      ></Tag>\n    );\n  }\n\n  renderFields(elements) {\n    return elements.map(element => {\n      let isHide = false;\n      if (element.hide) {\n        isHide = element.hide(this.model);\n      }\n\n      if (isHide == false) {\n        if (element.type == 'line') {\n          return [\n            <div class=\"df-fields-container\">\n              {element.fields.map(element => {\n                return (\n                  <div class={(element.type != 'html' ? this.options?.fieldClass : '') + ' is-flex-grow-' + (element.size || 1) + ' ' + (element.className || '')}>\n                    {this.renderField(element)}\n                  </div>\n                );\n              })}\n            </div>,\n\n            element.separator == true ? <hr style={{ 'text-align': 'left' }} /> : null,\n          ];\n        } else {\n          return [\n            <div class={element.type != 'html' ? this.options?.fieldClass : ''}>{this.renderField(element)}</div>,\n            element.separator == true ? <hr style={{ 'text-align': 'left' }} /> : null,\n          ];\n        }\n      }\n    });\n  }\n\n  render() {\n    console.log('render form', this.model, this.fields);\n    return <div>{this.fields?.length ? this.renderFields(this.fields) : null}</div>;\n  }\n}\n","import { Component, h } from '@stencil/core';\n\n@Component({\n  tag: 'example-1',\n})\nexport class Example1 {\n  model = {\n    firstName: 'St√©phane',\n    lastName: 'GUILLY',\n  };\n\n  form = [\n    {\n      type: 'html',\n      templateOptions: {\n        html: `\n        <article class=\"message is-success mb-4\">\n          <div class=\"message-header\">\n            <p>Green Header</p>\n            \n          </div>\n          <div class=\"message-body\">\n            Lorem ipsum dolor sit amet, consectetur adipiscing elit. <strong>Pellentesque risus mi</strong>, tempus quis placerat ut, porta nec nulla. Vestibulum rhoncus ac ex sit amet fringilla. Nullam gravida purus diam, et dictum <a>felis venenatis</a> efficitur. Aenean ac <em>eleifend lacus</em>, in mollis lectus. Donec sodales, arcu et sollicitudin porttitor, tortor urna tempor ligula, id porttitor mi magna a neque. Donec dui urna, vehicula et sem eget, facilisis sodales sem.\n          </div>\n        </article>`,\n      },\n    },\n    {\n      type: 'line',\n      separator: true,\n      fields: [\n        {\n          key: 'firstName',\n          type: 'input',\n          templateOptions: {\n            label: 'First Name',\n            required: true,\n          },\n          size: '1',\n        },\n        {\n          key: 'lastName',\n          type: 'input',\n          templateOptions: {\n            label: 'Last Name',\n            required: true,\n          },\n          size: '1',\n        },\n      ],\n    },\n    {\n      key: 'email',\n      type: 'input',\n      separator: true,\n      templateOptions: {\n        label: 'Email',\n        required: true,\n      },\n    },\n\n    {\n      type: 'html',\n      templateOptions: {\n        html: `\n        <article class=\"message is-warning mb-4\">\n          <div class=\"message-header\">\n            <p>Yellow header</p>\n            \n          </div>\n         \n        </article>`,\n      },\n    },\n    {\n      type: 'line',\n      separator: true,\n      fields: [\n        {\n          key: 'birthday',\n          type: 'datepicker',\n          templateOptions: {\n            label: 'Birthday Date',\n            required: true,\n          },\n        },\n        {\n          key: 'birthdayTime',\n          type: 'timepicker',\n          templateOptions: {\n            label: 'Birthday Time',\n            required: true,\n          },\n        },\n        {\n          key: 'type1',\n          type: 'select',\n          templateOptions: {\n            label: 'Birthday Country',\n            required: true,\n            options: [\n              {\n                id: 1,\n                value: 1,\n                label: 'France',\n              },\n              {\n                id: 2,\n                value: 2,\n                label: 'Italy',\n              },\n              {\n                id: 3,\n                value: 3,\n                label: 'Spain',\n              },\n            ],\n          },\n        },\n        {\n          key: 'phone',\n          type: 'phonenumber',\n          templateOptions: {\n            label: 'Phone Number :',\n            required: true,\n          },\n        },\n      ],\n    },\n    {\n      key: 'slider',\n      type: 'slider',\n      templateOptions: {\n        label: 'Dark Level :',\n        required: true,\n      },\n    },\n    {\n      key: 'displayDocs',\n      type: 'checkbox',\n      templateOptions: {\n        label: 'Do you want to add documents ?',\n        required: true,\n        multiple: false,\n        options: [\n          {\n            value: true,\n            label: 'YES',\n          },\n          {\n            value: false,\n            label: 'NO',\n          },\n        ],\n      },\n    },\n    {\n      key: 'docs',\n      hide: model => {\n        return model?.displayDocs?.length && model.displayDocs[0] == true ? false : true;\n      },\n      type: 'docs',\n      templateOptions: {\n        label: 'Documents :',\n        required: true,\n      },\n    },\n    {\n      key: 'level',\n      type: 'checkbox',\n      templateOptions: {\n        label: 'Level',\n        required: false,\n        multiple: true,\n        options: [\n          {\n            value: 1,\n            label: 'LOW',\n          },\n          {\n            value: 2,\n            label: 'MEDIUM',\n          },\n          {\n            value: 3,\n            label: 'HIGH',\n          },\n        ],\n      },\n    },\n    {\n      key: 'comment',\n      type: 'textarea',\n      templateOptions: {\n        label: 'Notes',\n        required: true,\n      },\n    },\n  ];\n\n  save() {}\n\n  render() {\n    return (\n      <div class=\"m-4\">\n        <dynamic-form\n          model={this.model}\n          fields={this.form}\n          options={{\n            fieldClass: 'ml-4 mr-4',\n            requiredText: 'This field is required !',\n            style: 'bulma',\n          }}\n        ></dynamic-form>\n        ;\n      </div>\n    );\n  }\n}\n"],"mappings":"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"}