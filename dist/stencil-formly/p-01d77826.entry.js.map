{"version":3,"names":["FieldSlider","async","promises","push","loadCss","loadScript","Promise","all","this","displayRequired","_a","templateOptions","required","value","componentDidRender","console","log","refInput","instance","noUiSlider","create","start","step","tooltips","wNumb","decimals","connect","range","min","max","on","Number","get","customChange","emit","set","renderInput","h","ref","el","render"],"sources":["./src/components/dynamic-form/fields/field-slider.tsx"],"sourcesContent":["import { Component, h, State, Prop, Event, EventEmitter } from '@stencil/core';\n\nimport { loadScript, loadCss, loadModule, loadNoModule } from '../../../utils/loadScript';\n\ndeclare var noUiSlider: any;\ndeclare var wNumb: any;\n@Component({\n  tag: 'field-slider',\n})\nexport class FieldSlider {\n  @Prop() value: any;\n  @Prop() disabled = false;\n  @Prop() templateOptions: any = {};\n\n  @Event() customChange: EventEmitter<any>;\n\n  refInput;\n  instance;\n\n  displayRequired;\n\n  async componentWillLoad() {\n    let promises = [];\n\n    promises.push(loadCss('https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.5.1/nouislider.min.css'));\n\n    promises.push(loadScript('https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/15.5.1/nouislider.min.js'));\n\n    promises.push(loadScript('https://cdnjs.cloudflare.com/ajax/libs/wnumb/1.2.0/wNumb.min.js'));\n\n    return Promise.all(promises);\n  }\n\n  async componentWillRender() {\n    this.displayRequired = this.templateOptions?.required == true && !this.value;\n  }\n\n  componentDidRender() {\n    console.log('ref', this.refInput);\n    if (!this.instance) {\n      this.instance = noUiSlider.create(this.refInput, {\n        start: this.value ? this.value : 50,\n        step: 10,\n        tooltips: [wNumb({ decimals: 0 })],\n        connect: 'lower',\n        range: {\n          min: 0,\n          max: 100,\n        },\n      });\n\n      this.instance.on('end', () => {\n        this.value = Number(this.instance.get());\n        this.customChange.emit({ value: this.value });\n      });\n    }\n\n    if (this.value) {\n      this.instance.set(this.value);\n    }\n  }\n\n  renderInput() {\n    return <div ref={el => (this.refInput = el as HTMLElement)}></div>;\n  }\n\n  render() {\n    return (\n      <field-container templateOptions={this.templateOptions} displayRequired={this.displayRequired}>\n        {this.renderInput()}\n      </field-container>\n    );\n  }\n}\n"],"mappings":"mGASaA,EAAW,M,uGAEH,M,qBACY,E,CAS/BC,0BACE,IAAIC,EAAW,GAEfA,EAASC,KAAKC,EAAQ,gFAEtBF,EAASC,KAAKE,EAAW,+EAEzBH,EAASC,KAAKE,EAAW,oEAEzB,OAAOC,QAAQC,IAAIL,E,CAGrBD,4B,MACEO,KAAKC,kBAAkBC,EAAAF,KAAKG,mBAAe,MAAAD,SAAA,SAAAA,EAAEE,WAAY,OAASJ,KAAKK,K,CAGzEC,qBACEC,QAAQC,IAAI,MAAOR,KAAKS,UACxB,IAAKT,KAAKU,SAAU,CAClBV,KAAKU,SAAWC,WAAWC,OAAOZ,KAAKS,SAAU,CAC/CI,MAAOb,KAAKK,MAAQL,KAAKK,MAAQ,GACjCS,KAAM,GACNC,SAAU,CAACC,MAAM,CAAEC,SAAU,KAC7BC,QAAS,QACTC,MAAO,CACLC,IAAK,EACLC,IAAK,OAITrB,KAAKU,SAASY,GAAG,OAAO,KACtBtB,KAAKK,MAAQkB,OAAOvB,KAAKU,SAASc,OAClCxB,KAAKyB,aAAaC,KAAK,CAAErB,MAAOL,KAAKK,OAAQ,G,CAIjD,GAAIL,KAAKK,MAAO,CACdL,KAAKU,SAASiB,IAAI3B,KAAKK,M,EAI3BuB,cACE,OAAOC,EAAA,OAAKC,IAAKC,GAAO/B,KAAKS,SAAWsB,G,CAG1CC,SACE,OACEH,EAAA,mBAAiB1B,gBAAiBH,KAAKG,gBAAiBF,gBAAiBD,KAAKC,iBAC3ED,KAAK4B,c"}