{"version":3,"file":"dynamic-form.js","sourceRoot":"","sources":["../../../src/components/dynamic-form/dynamic-form.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, h, Prop, Event, EventEmitter } from '@stencil/core';\nimport { loadCss } from '../../utils/loadScript';\n\nimport { state, onChange } from '../../stores/styleStore';\n\n@Component({\n  tag: 'dynamic-form',\n  styleUrl: 'dynamic-form.css',\n})\nexport class DynamicForm {\n  @Prop() model = {};\n  @Prop() fields;\n  @Prop() options: any;\n\n  @Event() event: EventEmitter<any>;\n\n  async componentWillLoad() {\n    let promises = [];\n    if (this.options.style) {\n      state.style = this.options.style;\n    }\n\n    if (state.style == 'bulma') {\n      promises.push(loadCss('https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css'));\n    } else if (state.style == 'bootstrap') {\n      promises.push(loadCss('https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css'));\n    }\n\n    if (promises.length) {\n      await Promise.all(promises);\n    }\n  }\n\n  renderField(element) {\n    let isDisabled = false;\n    if (element.disable) {\n      isDisabled = element.disable(this.model);\n    }\n\n    element.templateOptions.requiredText = this.options?.requiredText || 'This field is required';\n\n    const Tag = 'field-' + element.type;\n\n    return (\n      <Tag\n        value={this.model[element.key]}\n        templateOptions={element.templateOptions}\n        onCustomChange={ev => {\n          if (ev.detail?.value) {\n            this.model[element.key] = ev.detail?.value;\n          } else {\n            delete this.model[element.key];\n          }\n\n          this.model = { ...this.model };\n          this.event.emit({ type: 'change', model: this.model });\n        }}\n      ></Tag>\n    );\n  }\n\n  renderFields(elements) {\n    return elements.map(element => {\n      let isHide = false;\n      if (element.hide) {\n        isHide = element.hide(this.model);\n      }\n\n      if (isHide == false) {\n        if (element.type == 'line') {\n          return [\n            <div class=\"df-fields-container\">\n              {element.fields.map(element => {\n                return (\n                  <div class={(element.type != 'html' ? this.options?.fieldClass : '') + ' is-flex-grow-' + (element.size || 1) + ' ' + (element.className || '')}>\n                    {this.renderField(element)}\n                  </div>\n                );\n              })}\n            </div>,\n\n            element.separator == true ? <hr style={{ 'text-align': 'left' }} /> : null,\n          ];\n        } else {\n          return [\n            <div class={element.type != 'html' ? this.options?.fieldClass : ''}>{this.renderField(element)}</div>,\n            element.separator == true ? <hr style={{ 'text-align': 'left' }} /> : null,\n          ];\n        }\n      }\n    });\n  }\n\n  render() {\n    console.log('render form', this.model, this.fields);\n    return <div>{this.fields?.length ? this.renderFields(this.fields) : null}</div>;\n  }\n}\n"]}